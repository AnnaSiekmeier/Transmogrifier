<!DOCTYPE html>
<html>

    <head>
    
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width" / >
        <title>Transmogrifier ~ Temperature</title>
        
        <link href="css/reset.css" rel="stylesheet" type="text/css" />
        <link href="css/styles.css" rel="stylesheet" type="text/css" />
        
        <!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>-->
        <!--<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>-->
        <script src="js/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="js/jquery.mobile.custom.min.js"></script>
        <script src="js/custom-form-elements.js" type="text/javascript"></script>
    
    <style>
	</style>
    
    
    </head>

    <body class="category">
    
        <header class="categoryHead">
        	<div id="tempHead"></div>
        	<h1>TEMPERATURE</h1>
        </header>
        
        <section>
            <form action="">
            <input id="Input1" type="number" name="value">          
            <select id="Unit1" class="styled" name="temp1">
                <option value="Fahrenheit" selected>Fahrenheit</option>
                <option value="Celcius">Celcius</option>
                <option value="Kelvin" >Kelvin</option>
            </select>
            <div id="equals"></div>
            <input id="Input2" type="number" name="value">      
            <select id="Unit2" class="styled" name="temp2">
                <option value="Fahrenheit">Fahrenheit</option>
                <option value="Celcius" selected>Celcius</option>
                <option value="Kelvin" >Kelvin</option>
            </select>
            </form> 
            
            <div id="return"><a href="index.html"></a></div>
                        
        </section>
        
        <!--
        C = (°F - 32) / 1.8
        C = °K - 273
        F = (1.8 * °C) + 32
        F = 1.8 (°K - 273) + 32
        K = °C + 273
        K = ((°F - 32) / 1.8) + 273
        -->

    </body>
    
    <script>
	
	var activeInput = null;
	
	$('#Input1').change(function() {
		activeInput = '#Input1';
	  //alert('Handler for .change() called.');
	   if(isNaN($('#Input1').val())){
		   // prompt user.
			alert('Please enter a number.');
	   } else {
		   PerformCalculation();
	   };
	 });
	 
	 $('#Input2').change(function() {
		 activeInput = '#Input2';
	   if(isNaN($('#Input2').val())){
		   // prompt user.
			alert('Please enter a number.');
	   } else {
		   PerformCalculation2();
	   };
	 });
	 
	 $('#Unit1').change(function() {
		 //if(activeInput == '#Input1'){
		   //PerformCalculation();
		 //}
		 
		 //else if(activeInput == '#Input2'){
		   PerformCalculation2();
		 //}
	 });
	 
	 $('#Unit2').change(function() {
		 //if(activeInput == '#Input1'){
		   PerformCalculation();
		 //}
		 
		 //else if(activeInput == '#Input2'){
		   //PerformCalculation2();
		 //}
	 });
	 
	
	function PerformCalculation(){
		var convertedValue;
		
		if($('#Input1').val() == ""){
			$('#Input2').val("")
		}
		
		else if($('#Unit1').val() == $('#Unit2').val()){
			$('#Input2').val($('#Input1').val())
		}
		
		else if($('#Unit1').val() == "Fahrenheit"){
			//alert($('#Input1').val() + ' degrees Fahrenheit');
			if($('#Unit2').val() == "Celcius"){
				convertedValue = ((Number($('#Input1').val()) - 32) / 1.8);
				$('#Input2').val(convertedValue.toFixed(2))
			}
			else if($('#Unit2').val() == "Kelvin"){
				convertedValue = (((Number($('#Input1').val()) - 32) / 1.8) + 273);
				$('#Input2').val(convertedValue.toFixed(2))
			}
		}
		
		else if($('#Unit1').val() == "Celcius"){
			//alert($('#Input1').val() + ' degrees Celcius');
			if($('#Unit2').val() == "Fahrenheit"){
				convertedValue = (1.8 * Number($('#Input1').val()) + 32);
				$('#Input2').val(convertedValue.toFixed(2))
			}
			else if($('#Unit2').val() == "Kelvin"){
				convertedValue = (Number($('#Input1').val()) + 273);
				$('#Input2').val(convertedValue.toFixed(2))
			}
		}
		
		else if($('#Unit1').val() == "Kelvin"){
			//alert($('#Input1').val() + ' degrees Kelvin');
			if($('#Unit2').val() == "Fahrenheit"){
				convertedValue = (((Number($('#Input1').val()) - 32) / 1.8) - 273);
				$('#Input2').val(convertedValue.toFixed(2))
			}
			else if($('#Unit2').val() == "Celcius"){
				convertedValue = (Number($('#Input1').val()) - 273);
				$('#Input2').val(convertedValue.toFixed(2))
			}
		}
	};
	
////////////// CALCULATE BACKWARDS ///////////////
	
	function PerformCalculation2(){
		if($('#Input2').val() == ""){
			$('#Input1').val("")
		}
		
		else if($('#Unit2').val() == $('#Unit1').val()){
			$('#Input1').val($('#Input2').val())
		}
		
		else if($('#Unit2').val() == "Fahrenheit"){
			//alert($('#Input1').val() + ' degrees Fahrenheit');
			if($('#Unit1').val() == "Celcius"){
				var convertedValue = ((Number($('#Input2').val()) - 32) / 1.8);
				$('#Input1').val(convertedValue.toFixed(2))
			}
			else if($('#Unit1').val() == "Kelvin"){
				var convertedValue = (((Number($('#Input2').val()) - 32) / 1.8) + 273);
				$('#Input1').val(convertedValue.toFixed(2))
			}
		}
		
		else if($('#Unit2').val() == "Celcius"){
			//alert($('#Input1').val() + ' degrees Celcius');
			if($('#Unit1').val() == "Fahrenheit"){
				var convertedValue = (1.8 * Number($('#Input2').val()) + 32);
				$('#Input1').val(convertedValue.toFixed(2))
			}
			else if($('#Unit1').val() == "Kelvin"){
				var convertedValue = (Number($('#Input2').val()) + 273);
				$('#Input1').val(convertedValue.toFixed(2))
			}
		}
		
		else if($('#Unit2').val() == "Kelvin"){
			//alert($('#Input1').val() + ' degrees Kelvin');
			if($('#Unit1').val() == "Fahrenheit"){
				var convertedValue = (((Number($('#Input2').val()) - 32) / 1.8) - 273);
				$('#Input1').val(convertedValue.toFixed(2))
			}
			else if($('#Unit1').val() == "Celcius"){
				var convertedValue = (Number($('#Input2').val()) - 273);
				$('#Input1').val(convertedValue.toFixed(2))
			}
		}
	};
	
	</script>

</html>